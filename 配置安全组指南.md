# 配置云服务器安全组开放 80 端口 - 详细指南

## 📋 快速操作指南

根据您的云服务商，选择对应的操作步骤：

---

## 🔵 阿里云 ECS（最可能）

### 方法一：通过控制台（推荐）

#### 步骤 1: 登录控制台
1. 访问：https://ecs.console.aliyun.com
2. 使用您的阿里云账号登录

#### 步骤 2: 找到服务器实例
1. 在左侧菜单选择 **"实例与镜像"** → **"实例"**
2. 在实例列表中，找到公网 IP 为 `47.106.73.160` 的实例
3. 点击实例 ID 或实例名称进入详情页

#### 步骤 3: 进入安全组配置
1. 在实例详情页，点击 **"安全组"** 标签页
2. 找到当前绑定的安全组（通常显示为 `sg-xxxxx`）
3. 点击安全组 ID 进入安全组详情页

#### 步骤 4: 添加入站规则
1. 在安全组详情页，点击 **"入方向"** 标签
2. 点击 **"添加安全组规则"** 按钮
3. 填写规则信息：
   ```
   规则方向: 入方向
   授权策略: 允许
   优先级: 1（数字越小优先级越高）
   协议类型: 自定义 TCP
   端口范围: 80/80
   授权对象: 0.0.0.0/0（允许所有 IP）
   描述: HTTP 访问
   ```
4. 点击 **"保存"**

#### 步骤 5: 验证
等待 1-2 分钟后，在浏览器访问：
```
http://47.106.73.160
```

### 方法二：通过阿里云 CLI（如果已安装）

```bash
# 安装阿里云 CLI（如果未安装）
# macOS
brew install aliyun-cli

# 配置凭证
aliyun configure

# 添加安全组规则（需要先获取安全组 ID）
aliyun ecs AuthorizeSecurityGroup \
  --SecurityGroupId sg-xxxxx \
  --IpProtocol tcp \
  --PortRange 80/80 \
  --SourceCidrIp 0.0.0.0/0 \
  --Description "HTTP访问"
```

---

## 🟢 腾讯云 CVM

### 步骤 1: 登录控制台
1. 访问：https://console.cloud.tencent.com/cvm
2. 使用您的腾讯云账号登录

### 步骤 2: 找到服务器实例
1. 在左侧菜单选择 **"云服务器"** → **"实例"**
2. 在实例列表中，找到公网 IP 为 `47.106.73.160` 的实例
3. 点击实例 ID 进入详情页

### 步骤 3: 配置安全组
1. 在实例详情页，找到 **"安全组"** 部分
2. 点击安全组 ID 或 **"修改规则"** 按钮
3. 在安全组规则页面，点击 **"入站规则"** 标签
4. 点击 **"添加规则"** 按钮
5. 填写规则信息：
   ```
   类型: 自定义
   来源: 0.0.0.0/0
   协议端口: TCP:80
   策略: 允许
   备注: HTTP 访问
   ```
6. 点击 **"完成"**

### 步骤 4: 验证
等待 1-2 分钟后，在浏览器访问：
```
http://47.106.73.160
```

---

## 🔴 华为云 ECS

### 步骤 1: 登录控制台
1. 访问：https://console.huaweicloud.com/ecs
2. 使用您的华为云账号登录

### 步骤 2: 配置安全组
1. 在左侧菜单选择 **"弹性云服务器"** → **"安全组"**
2. 找到服务器绑定的安全组
3. 点击安全组名称进入详情
4. 点击 **"入方向规则"** 标签
5. 点击 **"添加规则"**
6. 配置：
   ```
   方向: 入方向
   协议: TCP
   端口: 80
   源地址: 0.0.0.0/0
   描述: HTTP 访问
   ```
7. 点击 **"确定"**

---

## 🟡 AWS EC2

### 步骤 1: 登录控制台
1. 访问：https://console.aws.amazon.com/ec2
2. 使用您的 AWS 账号登录

### 步骤 2: 配置安全组
1. 在左侧菜单选择 **"Instances"** → 找到您的实例
2. 选择实例，在下方详情中找到 **"Security groups"**
3. 点击安全组名称
4. 在安全组详情页，点击 **"Inbound rules"** 标签
5. 点击 **"Edit inbound rules"**
6. 点击 **"Add rule"**
7. 配置：
   ```
   Type: Custom TCP
   Port range: 80
   Source: 0.0.0.0/0
   Description: HTTP access
   ```
8. 点击 **"Save rules"**

---

## 📸 截图说明（阿里云示例）

如果您需要更直观的指导，以下是关键步骤的说明：

1. **实例列表页面**：可以看到所有服务器实例及其公网 IP
2. **实例详情页**：点击实例后，可以看到多个标签页（概览、网络与安全、安全组等）
3. **安全组规则页面**：可以看到入方向和出方向规则列表
4. **添加规则对话框**：填写端口、协议、授权对象等信息

---

## ⚠️ 常见问题

### Q1: 找不到安全组配置入口？
**A**: 不同云服务商的界面可能略有不同，通常安全组配置在：
- 实例详情页的"安全组"或"网络与安全"标签
- 或者独立的"安全组"菜单项

### Q2: 添加规则后仍然无法访问？
**A**: 请检查：
1. 规则是否已保存成功
2. 等待 1-2 分钟让规则生效
3. 确认规则方向是"入方向"（Inbound）
4. 确认协议是 TCP，端口是 80
5. 确认授权对象是 0.0.0.0/0

### Q3: 如何确认安全组规则已生效？
**A**: 在服务器上执行：
```bash
# 查看防火墙规则
iptables -L -n | grep 80

# 测试本地访问
curl -I http://localhost
```

### Q4: 是否需要同时开放 443 端口？
**A**: 如果将来要使用 HTTPS，需要开放 443 端口。目前 HTTP（80 端口）已足够。

---

## 🔍 验证配置

配置完成后，执行以下命令验证：

```bash
# 从本地测试
curl -I http://47.106.73.160

# 应该返回：
# HTTP/1.1 200 OK
# Server: nginx/1.20.1
```

或者在浏览器中访问：
```
http://47.106.73.160
```

应该能看到 SGC 网站首页。

---

## 📞 需要帮助？

如果按照上述步骤操作后仍然无法访问，请：
1. 确认您使用的是哪个云服务商
2. 截图安全组配置页面
3. 检查服务器上的 Nginx 日志：`tail -f /var/log/nginx/error.log`

---

**提示**: 安全组规则通常需要 1-2 分钟才能生效，请耐心等待后再测试访问。

